# 고도화 기능 개발 로드맵 및 PRD (기획서)

사용자 요청 사항을 분석하여 **구현 난이도, 사용자 임팩트, 의존성**을 고려한 추천 개발 순서와 각 기능별 상세 요구사항(PRD)을 정리했습니다.

---

## 📅 추천 개발 순서

| 순서 | 기능명 | 추천 사유 | 난이도 |
| :-- | :-- | :-- | :-- |
| **1** | **게스트 모드** | 최근 리팩토링(세션 분리)의 직접적인 수혜 기능이며, **신규 사용자 유입 장벽을 제거**하는 가장 중요한 기능입니다. | ⭐️⭐️ |
| **2** | **마일리지 시스템** | 구현이 비교적 간단하지만, 사용자에게 **지속적인 플레이 동기(보상)**를 부여하여 리텐션을 높입니다. | ⭐️ |
| **3** | **신규 바이러스 3종** | 게임의 **재미와 다양성**을 강화합니다. 로직이 복잡하므로 핵심 기능이 안정화된 후 진행하는 것이 좋습니다. | ⭐️⭐️⭐️ |
| **4** | **내 단어 등록** | 백엔드(DB, 관리자 페이지) 작업이 많고 가장 복잡합니다. 게임이 활성화된 후 **커뮤니티 기능**으로 도입하는 것이 적절합니다. | ⭐️⭐️⭐️⭐️ |

---

## 📝 기능별 상세 PRD (Product Requirements Document)

### 1. 게스트 모드 (Guest Mode)

**목표**: 회원가입 없이 즉시 게임을 즐기게 하여 이탈률을 줄이고, 게임 후 자연스럽게 가입을 유도합니다.

**상세 시나리오**:
1.  **진입**: 메인 화면에 [로그인] 버튼 외에 [체험하기(게스트)] 버튼 추가.
2.  **플레이**: 닉네임은 '게스트#1234' 형태로 자동 부여되거나 임시 입력 받음. 점수 기록은 로컬(메모리)에만 임시 저장.
3.  **종료 (Hook)**: 게임 오버 시 **"가상 랭킹"**을 보여주며 가입 유도.
    *   **가상 랭킹 표시**: "현재 점수(12,500점)로 가입 시 **전체 15위**에 해당합니다!" 라는 문구 노출.
    *   [회원가입/로그인]: 가입 완료 시 방금 플레이한 점수를 해당 계정의 기록으로 저장.
    *   [취소]: 점수 저장 없이 메인으로 이동.

**기술적 요구사항**:
*   `GameSession`에 `isGuest: true` 플래그 활용.
*   게임 종료 시 전체 랭킹 데이터를 조회하여 게스트 점수의 예상 순위를 계산하는 로직 추가.
*   회원가입 완료 후 `onSignUpSuccess` 콜백에서 임시 점수를 `submitScore` API로 전송하는 로직 필요.

---

### 2. 마일리지 시스템 (Mileage System)

**목표**: 단순 점수 경쟁을 넘어, 플레이 할수록 쌓이는 자산을 제공하여 성취감을 부여합니다.

**네이밍**: **드롭 (Drop)** (단위: **DR**)
*   베네치아(물) 컨셉과 떨어지는 단어를 형상화.

**상세 시나리오**:
1.  **적립**: 게임 종료 시 `획득 점수 / 1000` 만큼 드롭 적립 (소수점 첫째 자리까지).
    *   예: 12,500점 → 12.5 DR 적립.
2.  **표시**:
    *   **게임 종료 모달**: "획득 점수: 12,500점 (+12.5 DR)" 형태로 표시.
    *   **메인/랭킹 화면**: 내 프로필 옆에 "보유 드롭: 1,234.5 DR" 표시.

**기술적 요구사항**:
*   **DB**: `profiles` 테이블에 `drop_point` (numeric/float) 컬럼 추가.
*   **Logic**: `scoring.ts`에 `calculateMileage(score)` 함수는 이미 구현됨. 게임 종료 시 DB 업데이트 로직 추가.

---

### 3. 신규 바이러스 3종 (New Viruses)

**목표**: 단조로운 타이핑 게임에 전략적 요소와 긴장감을 더합니다.

#### A. 정승재 바이러스 (수학 퀴즈)
*   **규칙**: "12 + 15" 같은 수식이 내려옴. (정답 범위 10~50)
*   **입력**: 정답 숫자("27")를 입력하면 제거됨.
*   **보상**: `정답 * 100` 점 (일반 단어보다 고득점).
*   **패널티 없음**: 바닥에 닿아도 생명력이 깎이지 않고 그냥 사라짐 (보너스 스테이지 개념).

#### B. 시한폭탄 바이러스 (타임 어택)
*   **규칙**: 단어 옆에 **5초 카운트다운** 타이머가 표시됨.
*   **패널티**: 5초 내에 입력하지 못하거나 바닥에 닿으면 **즉시 폭발** (생명력 1 감소).
*   **UI**: 단어 UI 컴포넌트에 원형 타이머 또는 숫자 카운트 표시 필요.

#### C. 지뢰밭 바이러스 (광역 변환)
*   **기존 지뢰**: 단어를 제거하면 그 자리에 생성되어, 닿는 다른 단어를 파괴해주는 이로운 효과.
*   **지뢰밭 효과**: 발동 즉시 화면에 떠 있는 **모든 단어**가 **지뢰**로 변함.
*   **결과**: 화면 가득 지뢰가 생성되므로, 이후 내려오는 단어들이 이 지뢰들과 충돌하여 대거 파괴됨(위기 탈출 기회).
*   **참고**: 변환된 지뢰들은 기존 지뢰와 동일한 속성(충돌 시 상대 파괴)을 가지며, **다음 스테이지로 넘어가도 사라지지 않고 유지됨**.

**기술적 요구사항**:
*   `Word` 인터페이스에 `type` (math, bomb, etc.) 및 `timer` 속성 추가.
*   `words.ts`의 `spawnWords` 로직 고도화.
*   지뢰밭 발동 시 `wordList` 전체 순회하며 타입을 'landmine'으로 변경하는 로직 추가.

---

### 4. 내 단어 등록 (User Submitted Words)

**목표**: 유저가 직접 콘텐츠를 생산하게 하여 참여도를 높입니다.

**상세 시나리오**:
1.  **등록**: 로그인 유저가 [단어 추가] 메뉴에서 단어 입력 (한글/영어, 2~10자).
2.  **검수 대기**: 등록된 단어는 '대기(Pending)' 상태로 저장. 게임에 바로 노출되지 않음.
3.  **관리자 승인 (Admin Page)**:
    *   **목록 조회**: 유저가 등록한 모든 단어를 조회 가능.
    *   **필터링**: 승인 여부(승인/미승인/반려)로 필터링 가능 (기본값: **미승인**).
    *   **일괄 처리**: 체크박스로 여러 단어를 선택하여 **일괄 승인** 가능.
    *   **반려**: 개별 반려 시 사유 입력.
4.  **현황 조회**: 유저는 [내 단어] 메뉴에서 상태(승인/대기/반려) 및 반려 사유 확인 가능.
5.  **통계**: 승인된 단어가 게임에서 몇 번 타이핑 되었는지 `use_count` 조회 가능.

**기술적 요구사항**:
*   **DB**: `word_submissions` 테이블 신설 (id, user_id, word, status, reject_reason, use_count, created_at).
*   **API**: 단어 등록, 조회, 승인/반려 RPC 함수.
*   **Service**: `wordService.ts`에서 `getWordsForStage` 호출 시 `공식 단어 + 승인된 유저 단어`를 섞어서 가져오도록 로직 수정.
