# ğŸ“¦ Gemini CLI Prompt Package (Korean Version)

## ğŸ§° 0) ì›ìƒ· ë¶€íŠ¸ìŠ¤íŠ¸ë© (í”„ë¡œì íŠ¸ ì „ì²´ ìƒì„±)

```
"Venezia" ì´ë¦„ì˜ Vite React+TypeScript í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€: zustand, @tanstack/react-query, clsx
ê°œë°œìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€: vitest, @vitest/ui, jsdom, @testing-library/react, @testing-library/user-event, playwright, eslint, prettier, @types/node, @types/react, @types/react-dom

í”„ë¡œì íŠ¸ êµ¬ì¡°(ëª¨ë“  íŒŒì¼ì— ìµœì†Œ ë™ì‘ ì½”ë“œ í¬í•¨):
src/
  app/
    screens/Welcome.tsx
    screens/Game.tsx
    components/Window.tsx
    components/Button.tsx
    components/Input.tsxë‘—
    components/Modal.tsx
  game/
    components/Word.tsx
    components/GameArea.tsx
    engine/gameLoop.ts
    systems/Spawn.ts
    systems/Move.ts
    systems/Collision.ts
    systems/Scoring.ts
    state/useGameStore.ts
  data/
    supabaseClient.ts
    queries/stage.ts
    queries/scores.ts
  design-tokens/tokens.css
  domains/ime.ts
  domains/stage.ts
  domains/wordgen.ts
  utils/time.ts
  main.tsx
  App.tsx
.env.example (SUPABASE_URL=, SUPABASE_ANON_KEY=)

ì´ˆê¸°í™”:
- React Router(Welcome â†’ Game) ì„¸íŒ…
- Zustand ì „ì—­ ìŠ¤í† ì–´(ì ìˆ˜/ë‹¨ê³„/ë‚¨ì€ë¸”ë¡/íƒ€ì´ë¨¸/ë‹¨ì–´ë¦¬ìŠ¤íŠ¸)
- Appì— TanStack Query Provider ì£¼ì…
- tokens.cssì— ìœˆë„ìš° 3.1 í† í°(ìƒ‰/ë² ë²¨) ì •ì˜
- ESLint/Prettier/Vitest ì„¤ì •
- Playwright ì„¤ì • ë° ìƒ˜í”Œ E2E í…ŒìŠ¤íŠ¸

ìˆ˜ìš©ê¸°ì¤€:
- `pnpm dev` ì •ìƒ ì»´íŒŒì¼
- `/` ì§„ì… ì‹œ Welcome, Start Game í´ë¦­ ì‹œ /game ì´ë™
- Game í™”ë©´ì— ë©”ì¸ ê²Œì„ ì˜ì—­(div)ì´ ë§ˆìš´íŠ¸ë¨
- `pnpm test`, `pnpm exec playwright test` ì •ìƒ ì‹¤í–‰
```

---

## ğŸ§± 1) ì½”ì–´ ê²Œì„ ë£¨í”„

```
React DOMê³¼ CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì„ ì˜ì—­ì„ êµ¬í˜„í•©ë‹ˆë‹¤:
- 12ê°œ ì»¬ëŸ¼(CSS Grid/Flexbox)ê³¼ ë°”ë‹¥(ground) ìœ„ì¹˜ ì •ì˜
- Word ì»´í¬ë„ŒíŠ¸: {id, text, column, position}. DOM ìš”ì†Œë¡œ ë Œë”ë§
- ìŠ¤í°: `spawnInterval`(ë‹¨ê³„ë³„ ì„¤ì •ê°’, ì˜ˆ: 1ë‹¨ê³„ 3000ms)ë§ˆë‹¤ ì»¬ëŸ¼ì„ ëœë¤ ì§€ì •í•˜ì—¬ ìƒˆ ë‹¨ì–´ ìƒíƒœ(state) ìƒì„±
- ì´ë™: CSS Transition ë˜ëŠ” Keyframe Animationì„ ì‚¬ìš©í•˜ì—¬ ë‹¨ì–´ê°€ ìœ„ì—ì„œ ì•„ë˜ë¡œ ë–¨ì–´ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„. ì• ë‹ˆë©”ì´ì…˜ ì§€ì†ì‹œê°„ì€ í˜„ì¬ ë‹¨ê³„ì˜ `fallDuration`ìœ¼ë¡œ ì„¤ì •
- ë°”ë‹¥ ì¶©ëŒ: animationend ì´ë²¤íŠ¸ë‚˜ requestAnimationFrame ë£¨í”„ ë‚´ì—ì„œ getBoundingClientRectë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì–´ê°€ ë°”ë‹¥ì— ë‹¿ì•˜ëŠ”ì§€ ê°ì§€. ì¶©ëŒ ì‹œ í•´ë‹¹ ì»¬ëŸ¼ block ê°ì†Œ, 12ê°œ ì „ë¶€ ì†Œì§„ ì‹œ Game Over
- íƒ€ê²Ÿ ê·œì¹™: í˜„ì¬ ì…ë ¥ ë‚´ìš©ì€ í™”ë©´ì— ë³´ì´ëŠ” ëª¨ë“  ë‹¨ì–´ì™€ ë¹„êµë©ë‹ˆë‹¤. ì…ë ¥ì´ íŠ¹ì • ë‹¨ì–´ì™€ ì™„ì „íˆ ì¼ì¹˜í•˜ë©´, í•´ë‹¹ ë‹¨ì–´ê°€ ì œê±°ë˜ê³  ì ìˆ˜ë¥¼ íšë“í•©ë‹ˆë‹¤.
- ì ìˆ˜ (1ì°¨): score += (ë‹¨ì–´ ê¸¸ì´ * ë‹¨ê³„ * 10)  # ì‹¤ì œ íƒ€ìˆ˜ ê¸°ë°˜ì˜ ë³µì¡í•œ ê³„ì‚°ì€ ì¶”í›„ ë¦¬íŒ©í† ë§ ë‹¨ê³„ì—ì„œ ì²˜ë¦¬

ì§€ê¸ˆì€ ì½”ë“œì— ë”ë¯¸ stage ì„¤ì •(ë°°ì—´)ìœ¼ë¡œ `fallDuration`ê³¼ `spawnInterval` ì œê³µ.
Reactì— HUD(ì ìˆ˜/ë‹¨ê³„/ë¸”ë¡/ì‹œê°„) ë Œë”ë¥¼ ìœ„í•œ ìƒíƒœ/ì´ë²¤íŠ¸ ë…¸ì¶œ.

ìˆ˜ìš©ê¸°ì¤€:
- ë‹¨ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ì‹œê°ì ìœ¼ë¡œ ë‚™í•˜/ì¶©ëŒ í›„ ì œê±°ë¨
- ë‹¨ê³„ë³„ `spawnInterval`ì— ë§ì¶° ë‹¨ì–´ê°€ ìƒì„±ë¨
- ë¸”ë¡ 12ê°œ íŒŒê´´ ì‹œ ê²Œì„ ì¢…ë£Œ ì‹ í˜¸ê°€ Reactë¡œ ì „ë‹¬ë˜ì–´ ëª¨ë‹¬ í‘œì‹œ ê°€ëŠ¥
```

---

## âŒ¨ï¸ 2) í•œê¸€ IME ì•ˆì „ ì…ë ¥

```
ìˆ¨ê¹€ <input> + composition ì´ë²¤íŠ¸ë¡œ ì…ë ¥ ì²˜ë¦¬:
- keydown ë¹„êµ ê¸ˆì§€
- compositionstart/update/end ë° input ì´ë²¤íŠ¸ ì‚¬ìš©
- NFC ì •ê·œí™” í›„ â€˜ì™„ì„± ìŒì ˆâ€™ ê¸°ì¤€ ë¹„êµ
- í™œì„± íƒ€ê²Ÿê³¼ ë™ê¸°í™”ëœ ì…ë ¥ ë²„í¼ ìœ ì§€, ì™„ì „ ì¼ì¹˜ ì‹œ ë‹¨ì–´ ì»´í¬ë„ŒíŠ¸ ì œê±°/ì ìˆ˜ ë°˜ì˜/ë²„í¼ ì´ˆê¸°í™”
- Reactì— í˜„ì¬ ì…ë ¥ê°’ì„ ë…¸ì¶œí•´ ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ

ìˆ˜ìš©ê¸°ì¤€:
- ì¡°í•© ì¤‘ ë¹„êµ/ì œê±° ë°œìƒ ê¸ˆì§€
- ì¡°í•© ì¢…ë£Œ í›„ í•œê¸€ ë§¤ì¹­ ì •í™•
- ì˜ë¬¸/í•œê¸€ í˜¼ì…ì—ë„ ì˜¤ì‘ë™ ì—†ìŒ
```

---

## ğŸªŸ 3) UI íë¦„ ë° ë ˆíŠ¸ë¡œ ìŠ¤íƒ€ì¼

```
ìœˆë„ìš° 3.1 ìŠ¤íƒ€ì¼ UI:
- tokens.css: ê¸°ë³¸ íŒ”ë ˆíŠ¸, ë² ë²¨ ê·¸ë¦¼ì(ëŒì¶œ/ìŒê°), í°íŠ¸ ìŠ¤íƒ(Neoë‘¥ê·¼ëª¨â†’ë‹ì›€)
- ì»´í¬ë„ŒíŠ¸: Window, Button, Input, Modal(ë² ë²¨ í…Œë‘ë¦¬/í‰ë©´ ìƒ‰ìƒ)
- í™”ë©´:
  - Welcome: ë‹‰ë„¤ì„ ì…ë ¥(LocalStorage ì €ì¥), ì‹œì‘, ë­í‚¹ë³´ê¸°
  - Game HUD: ë‹¨ê³„/ì ìˆ˜/ë‚¨ì€ë¸”ë¡/ìŠ¤í†±ì›Œì¹˜(MM:SS.s)
  - Game Over ëª¨ë‹¬: "ë‹¤ì‹œí•˜ê¸°", "ë©”ì¸ìœ¼ë¡œ"
- ë‹¨ê³„ í´ë¦¬ì–´ ëª¨ë‹¬: ì¼ì‹œì •ì§€ + 3ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´

ìˆ˜ìš©ê¸°ì¤€:
- ë ˆíŠ¸ë¡œ ë£©ì•¤í•„ ì¶©ì¡±(ë² ë²¨/íŒ”ë ˆíŠ¸)
- Welcomeâ†’Gameâ†’GameOver í”Œë¡œìš° ì •ìƒ
- ë‹‰ë„¤ì„ LocalStorage ìœ ì§€
```

---

## ğŸ—„ 4) Supabase ì—°ë™ (ì½ê¸°)

```
Supabase í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€(env: SUPABASE_URL, SUPABASE_ANON_KEY).
SQL íŒŒì¼ ìƒì„±:
- stage_settings í…Œì´ë¸” (`spawn_interval_seconds` float ì»¬ëŸ¼ ì¶”ê°€)
- scores í…Œì´ë¸”
- scores(score desc) ì¸ë±ìŠ¤
ì¿¼ë¦¬:
- stageë³„ `fall_duration_seconds`, `spawn_interval_seconds`, `clear_duration_seconds` ì¡°íšŒ
- Top10 ë° ë‚´ ìµœê³ ê¸°ë¡(nickname) ì¡°íšŒ
- **í˜„ì¬ stageì— ë§ëŠ” ë‹¨ì–´ ëª©ë¡ ì¡°íšŒ (`min_level`ê³¼ `max_level` ì‚¬ìš©)**

ì£¼ì˜: ì—¬ê¸°ì„œëŠ” SQL/í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë§Œ ìƒì„±, ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ë‚˜ì¤‘ì— ìˆ˜ë™ ì‹¤í–‰.

ìˆ˜ìš©ê¸°ì¤€:
- Welcome/Gameì—ì„œ stage ì„¤ì •ì„ ë¶ˆëŸ¬ì™€ í•˜ê°•/ì¶œí˜„/í´ë¦¬ì–´ ì‹œê°„ ì ìš©
- ë­í‚¹ ëª¨ë‹¬ì—ì„œ Top10 + ë‚´ ìµœê³ ê¸°ë¡ í‘œì‹œ(ìˆìœ¼ë©´ í•˜ì´ë¼ì´íŠ¸)
```

---

## ğŸ“ 5) Supabase RPC ì“°ê¸°

```
RPC ìƒì„±: update_high_score(nickname text, play_at text, score int), security definer.
ë‹‰ë„¤ì„ ê¸°ì¤€ upsert, scoreëŠ” ê¸°ì¡´ê³¼ ìƒˆ ê°’ ì¤‘ í° ê°’ ìœ ì§€, play_at/updated_at ê°±ì‹ .
RLS: anon select í—ˆìš©, í´ë¼ì´ì–¸íŠ¸ ì§ì ‘ insert/update ì°¨ë‹¨.
ê²Œì„ ì˜¤ë²„:
- {nickname, play_at, score}ë¡œ RPC í˜¸ì¶œ
- Top10 ë° ë‚´ ìˆœìœ„ ì¬ì¡°íšŒ, Top10 ë°–ì´ë©´ êµ¬ë¶„ì„  ì•„ë˜ ë‚´ ê¸°ë¡ í‘œì‹œ

ìˆ˜ìš©ê¸°ì¤€:
- ë” ë†’ì€ ì ìˆ˜ë§Œ ê°±ì‹ 
- í‘œì‹œ ê·œì¹™ ì¤€ìˆ˜: Top10 + (ì™¸ë¶€ì¼ ë•Œ) êµ¬ë¶„ì„  ì•„ë˜ ë‚´ ê¸°ë¡
```

---

## ğŸ§ª 6) í…ŒìŠ¤íŠ¸ & ì„±ëŠ¥

```
ìœ ë‹›(Vitest):
- fallDurationìœ¼ë¡œ animation-duration ê³„ì‚°
- selectActiveTarget(ë™ë¥  ì²˜ë¦¬)
- score(ë‹¨ì–´ê¸¸ì´, ë‹¨ê³„)

E2E(Playwright):
- 60ì´ˆ ìƒì¡´ â†’ ë‹¨ê³„ í´ë¦¬ì–´ ëª¨ë‹¬(3..2..1)
- ë¸”ë¡ 12ê°œ íŒŒê´´ â†’ ê²Œì„ì˜¤ë²„ ëª¨ë‹¬
- ë­í‚¹ ëª¨ë‹¬ í‘œê¸° ê·œì¹™(Top10 + ì™¸ë¶€ ì‹œ ë‚´ ê¸°ë¡ ë³„ë„)

ì„±ëŠ¥:
- CSS `transform` ì†ì„± ë“±ì„ í™œìš©í•œ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ ë° íš¨ìœ¨ì ì¸ React ë¦¬ë Œë”ë§ìœ¼ë¡œ ì¤‘ê°„ ì‚¬ì–‘ì—ì„œë„ ì„±ëŠ¥ ìœ ì§€

ìˆ˜ìš©ê¸°ì¤€:
- ë¡œì»¬ì—ì„œ ìœ ë‹›/E2E ëª¨ë‘ í†µê³¼
```

--- 

## âœ¨ 7) ë¦¬íŒ©í† ë§ (ì ìˆ˜ ê³„ì‚°)

**ëª©í‘œ:** ë‹¨ìˆœ ê¸€ì ìˆ˜ ê¸°ë°˜ì˜ ì ìˆ˜ ê³„ì‚° ì‹œìŠ¤í…œì„ ì‹¤ì œ íƒ€ìˆ˜ ê¸°ë°˜ ëª¨ë¸ë¡œ ê³ ë„í™”í•©ë‹ˆë‹¤.

**ì»¨í…ìŠ¤íŠ¸:** ì´ˆê¸° ë²„ì „ì€ í•µì‹¬ ê²Œì„ ë£¨í”„ë¥¼ ë¹ ë¥´ê²Œ êµ¬ì¶•í•˜ê¸° ìœ„í•´ `word.length`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ìˆ˜ë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤. ì´ ë¦¬íŒ©í† ë§ TaskëŠ” ì´ˆê¸° ê¸°íš(PRD)ì— ëª…ì‹œëœ, ë³´ë‹¤ í˜„ì‹¤ì ì¸ ì ìˆ˜ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.

**ìš”êµ¬ì‚¬í•­:**
- `calculateKeystrokes(word: string): number`ì™€ ê°™ì€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- ì´ í•¨ìˆ˜ëŠ” ì…ë ¥ëœ ë¬¸ìì—´ì„ ë¶„ì„í•˜ì—¬, í‘œì¤€ í•œê¸€ ë‘ë²Œì‹ ë° ì˜ë¬¸ QWERTY í‚¤ë³´ë“œ ê¸°ì¤€ìœ¼ë¡œ í•„ìš”í•œ íƒ€ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.
- **í•œê¸€:** ìŒì ˆì„ ìëª¨ ë‹¨ìœ„ë¡œ ë¶„í•´í•©ë‹ˆë‹¤. (ì˜ˆ: 'í•œ' -> 'ã…', 'ã…', 'ã„´'). ì—¬ëŸ¬ ë²ˆì˜ ì…ë ¥ì´ í•„ìš”í•œ ëœì†Œë¦¬(ì˜ˆ: 'ã„²')ë‚˜ ë³µëª¨ìŒ(ì˜ˆ: 'ã…˜')ì„ ì •í™•íˆ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤.
- **ì˜ì–´:** `Shift` í‚¤ê°€ í•„ìš”í•œ ëŒ€ë¬¸ìë‚˜ íŠ¹ìˆ˜ë¬¸ìëŠ” 2íƒ€ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
- `useGameLogic` í›…ì˜ ì ìˆ˜ ê³„ì‚° ë¡œì§ì„ `word.length` ëŒ€ì‹  ìƒˆë¡œ ë§Œë“  ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.

**ìˆ˜ìš©ê¸°ì¤€:**
- `calculateKeystrokes('ì–´ì œ')`ëŠ” 4ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `calculateKeystrokes('Venezia')`ëŠ” 8ì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ëŒ€ë¬¸ì V í¬í•¨)
- ê²Œì„ ë‚´ ì ìˆ˜ê°€ ìƒˆë¡œìš´ ê³„ì‚°ë²•ì— ë”°ë¼ ì •í™•íˆ ë°˜ì˜ë©ë‹ˆë‹¤.
```